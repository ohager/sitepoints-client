var _spc=_spc||{};_spc.Config=function(n){function c(n,c){return t&&t[n]?t[n]:c}var t=n;this.serverHost=c("serverHost","http://localhost:3000"),this.cacheSize=c("cacheSize",10),this.cacheTimeout=c("cacheTimeout",10)};var _spc=_spc||{};_spc.PointTracker=function(){var n,c,t=window.onmousemove,i=window.onclick,o=function(n,t){c={x:n.screenX,y:n.screenY,url:window.href,timestamp:Date.now()},t&&t(n)};this.startClickTracking=function(n){window.onclick=function(t){o(t,i),n(c)}},this.stopClickTracking=function(){window.onclick=i},this.startIntervalTracking=function(i,e){window.onmousemove=function(n){o(n,t)},clearInterval(n),setInterval(function(){c&&i(c)},e)},this.stopIntervalTracking=function(){clearInterval(n),window.onmousemove=t}};var _spc=_spc||{};_spc.main=function(n){console.log("main: "+JSON.stringify(n));var c=new _spc.PointTracker,t=new _spc.Storage(new _spc.Config);c.startClickTracking(function(n){t.push(n),console.log(JSON.stringify(t.data()))})};var _spc=_spc||{};_spc.Storage=function(n){var c,t=this,i=(n.serverHost,n.cacheSize),o=1e3*n.cacheTimeout,e=[],s=function(){e=[]};this.push=function(n){e.push(n),o>0&&(clearTimeout(c),c=setTimeout(function(){t.flush()},o)),e.length>=i&&t.flush()},this.data=function(){return e.slice()},this.flush=function(){console.log("Flushed Storage"),s()}};